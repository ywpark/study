# Redis ê°€ ì™œ ë¹ ë¥¼ê¹Œ?

---

# Redis ë€?

---

- Remote Dictionary Server
- In-Memory ë°ì´í„° êµ¬ì¡° ì €ì¥ì†Œ

# íŠ¹ì§•

---

### 1. In-Memory ë°ì´í„° ìŠ¤í† ë¦¬ì§€

- ëª¨ë“  ë°ì´í„°ë¥¼ ë©”ì¸ ë©”ëª¨ë¦¬(RAM)ì— ì €ì¥í•˜ê¸° ë•Œë¬¸ì— DISK I/O ê°€ ë°œìƒí•˜ì§€ ì•Šì•„ì„œ ë§¤ìš° ë¹ ë¥¸ ì½ê¸° ë° ì“°ê¸° ì„±ëŠ¥ ì œê³µ

### 2. Key-Value ë°ì´í„° ëª¨ë¸

### 3. ë‹¤ì–‘í•œ ë°ì´í„° êµ¬ì¡° ì§€ì›

### 4. Single-Threaded ëª¨ë¸

- ë³µì¡í•œ ë™ê¸°í™” ë¬¸ì œì™€ Lock ì˜¤ë²„í—¤ë“œë¥¼ í”¼í•  ìˆ˜ ìˆìŒ

### 5. ì˜ì†ì„±(Persistence) ì§€ì›

- RDB (Redis Database) : íŠ¹ì • ì‹œì ì— ë©”ëª¨ë¦¬ ë°ì´í„°ë¥¼ ë°”ì´ë„ˆë¦¬ íŒŒì¼ë¡œ ìŠ¤ëƒ…ìƒ· ì €ì¥
- AOF (Append Only File) : ëª¨ë“  ì“°ê¸° ëª…ë ¹ì„ ë¡œê·¸ íŒŒì¼ì— ê¸°ë¡í•˜ê¸° ë–„ë¬¸ì— ë°ì´í„° ë³µêµ¬ê°€ ê°€ëŠ¥í•¨
    - AOF ì„¤ì •ì´ ë˜ì–´ ìˆëŠ” ìƒíƒœì—ì„œ  `flushall` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ê°€ ì‚­ì œë˜ë”ë¼ë„
    AOF íŒŒì¼ì„ ì—´ì–´ì„œ `flushall` ì‚­ì œ í›„ Redis ë¥¼ ì¬ì‹œì‘í•˜ë©´ ë³µì›ì´ ê°€ëŠ¥

### 6. í™•ì¥ì„±(Scalability) ê³¼ ê³ ê°€ìš©ì„±(High Availability)

- ë³µì œ (Replication) : ë§ˆìŠ¤í„°-ìŠ¬ë ˆì´ë¸Œ êµ¬ì¡°ê°€ ê°€ëŠ¥
- Sentinel
    - Redis ëª¨ë‹ˆí„°ë§
    - Fail-Over ì„œë¹„ìŠ¤
    - Master ë¥¼ ê°ì‹œí•˜ì—¬ ë¬¸ì œê°€ ë°œìƒí•œ ê²½ìš° ë‹¤ë¥¸ Slave ë¥¼ Master ë¡œ ìŠ¹ê²© ì‹œí‚´
        - ê¸°ì¡´ Master ê°€ ì •ìƒí™” ë˜ì–´ë„ Master ê°€ ì•„ë‹Œ Slave ë¡œ ë¨
    - ì¿¼ëŸ¼(Quorum) : Sentinel ì´ ë§ˆìŠ¤í„°ê°€ ë‹¤ìš´ë˜ì—ˆë‹¤ê³  íŒì •í•˜ëŠ” ê¸°ì¤€
        - Quorum 2 : ìµœì†Œ 2 ëŒ€ì´ìƒì˜ Sentinel ì´ ë§ˆìŠ¤í„°ê°€ ë‹¤ìš´ë˜ì—ˆë‹¤ê³  ì¸ì§€í•´ì•¼ë§Œ Fail-Overê°€ ì§„í–‰ë¨
- Cluster : ì—¬ëŸ¬ Redis ë…¸ë“œì— ë°ì´í„°ë¥¼ ë¶„ì‚° ì €ì¥ ê°€ëŠ¥

# ì‚¬ìš© ì‚¬ë¡€

---

- Caching
- Session Management
- Message Broker
- Distributed Lock
- Sorted Sets ì„ í™œìš©í•œ ì‹¤ì‹œê°„ ìˆœìœ„ í˜¹ì€ ì¹´ìš´í„°

# ì´ìœ 

---

### 1. I/O Multiplexing ( + Event Loop )

- `Blocking I/O` ëª¨ë¸ì˜ ê²½ìš°ì—ëŠ” `multi-process` `multi-thread` ë¡œ ì…ì¶œë ¥ ë‹¤ì¤‘í™”ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ ë³µì¡í•œ ì´ìŠˆê°€ ìƒê¸°ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ìƒ ì´ì ì´ ì—†ë‹¤ ( `IPC, ë™ê¸°í™”(Semaphore, Mutex)` )
- `Multiplexing` ëª¨ë¸ì˜ ê²½ìš°ì—ëŠ” í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œì—ì„œ ë‹¤ìˆ˜ì˜ í´ë¼ì´ì–¸íŠ¸ì— ì—°ê²°ëœ ì†Œì¼“(FD, íŒŒì¼ ë””ìŠ¤í¬ë¦½í„°)ì„ ê´€ë¦¬í•˜ë©´ì„œ ì†Œì¼“ì— ì´ë²¤íŠ¸(read/write)ê°€ ë°œìƒí•  ë•Œë§Œ í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„í•¨ìœ¼ë¡œì¨ ë” ì ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©.
- ê¸°ë³¸ì€ `select()` ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ ì—¬ëŸ¬ ê°œì˜ ì†Œì¼“ íŒŒì¼ ì¤‘ read í•¨ìˆ˜ë¡œ ë°ì´í„° í˜¸ì¶œì´ ê°€ëŠ¥í•œ ì†Œì¼“ì´ ìƒê¸¸ ë•Œê¹Œì§€ `ëŒ€ê¸°`
- ëŒ€ê¸° í•˜ëŠ” ë°©ì‹ì— ë”°ë¥¸ ê¸°ë²•
    - `select()` : ì–´ë–¤ FD ì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸í• ê¸° ìœ„í•´ì„œ fd_set í…Œì´ë¸” ì „ì²´ ê²€ì‚¬ 
                          `O(n)`
    - `poll()` :  ì‹¤ì œ FD ê°œìˆ˜ë§Œí¼ë§Œ loop ë¥¼ ê²€ì‚¬í•˜ì—¬ ì´ë²¤íŠ¸ ë°œìƒì„ ì²´í¬í•˜ê¸° ë•Œë¬¸ì— select() ë³´ë‹¤
                    ëŠ” ì¡°ê¸ˆ ë‚˜ì„ ìˆ˜ëŠ” ìˆìŒ `O(n)`
    - `epoll()` : `select()` `poll()` ê³¼ ë‹¬ë¦¬ FDì˜ ìƒíƒœê°€ kernelì—ì„œ ê´€ë¦¬í•˜ì—¬ ìƒíƒœê°€ ë°”ë€ ê²ƒì„
                    ì§ì ‘ í†µì§€í•´ì£¼ëŠ” ë°©ì‹. ì¦‰ fd_set ì„ ê²€ì‚¬í•˜ê¸° ìœ„í•´ loopë¥¼ ëŒ í•„ìš”ê°€ ì—†ë‹¤ `O(1)`
        - Edge Trigger ë°©ì‹
        - Level Trigger ë°©ì‹

### 2. ìµœì í™”ëœ ë°ì´í„° êµ¬ì¡°

- ë‚´ë¶€ì ìœ¼ë¡œ ë§¤ìš° íš¨ìœ¨ì ì´ê³  ìµœì í™”ëœ ìë£Œêµ¬ì¡°ë¥¼ êµ¬í˜„
- ì‹œê°„ ë³µì¡ë„ (Time Complexity)
    - ëŒ€ë¶€ë¶„ì˜ í•µì‹¬ ì—°ì‚°ë“¤ì´ O(1), O(log N)  ìœ¼ë¡œ ì„¤ê³„
- ë¬¸ìì—´(String)
    - SDS ( Simple Dynamic String ) ìì²´ ë¬¸ìì—´ ìë£Œ êµ¬ì¡°ë¥¼ ì‚¬ìš©
        - ê°™ì´ í• ë‹¹(embstr)
        - ê°ê° í• ë‹¹(raw)
- ë¦¬ìŠ¤íŠ¸(List)
    - Doubly Linked List
    - Zip List
    - Quick List
- í•´ì‹œ(Hash)
    - í•„ë“œ-ê°’ í˜ì–´ ì»¬ë ‰ì…˜
- Set
    - ì¼ë°˜ì ì¸ Set ìë£Œ êµ¬ì¡°ì™€ ë™ì¼
    - `SMEMEBERS`  ëª…ë ¹ì–´ì˜ ê²½ìš° `O(N)` ì´ë¯€ë¡œ ì£¼ì˜í•´ì•¼í•¨
- Sorted Set
    - ZSet ì´ë¼ê³ ë„ ë¶ˆë¦¼
    - Skip List
    - Zip List

# ê¸°íƒ€

---

> ğŸ’¡I/O ì‘ì—… ì´ë€ ?
>  : user space(User Mode) ì—ì„œ ì§ì ‘ ìˆ˜í–‰í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— user process ê°€ 
>   kernel(Kernel Mode) ì— ì‹œìŠ¤í…œ ì½œì„ í•˜ì—¬ í•˜ë“œì›¨ì–´ ì¥ì¹˜ì™€ í†µì‹ .
> 

### 1. Synchronous/Asynchronous

- Synchronous
    - í˜¸ì¶œ í›„ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë‹¤ìŒ ì‘ì—… ì§„í–‰
- Asynchronous
    - í˜¸ì¶œ í›„ ì‘ì—… ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë‹¤ìŒ ì‘ì—… ì§„í–‰

### 2. Blocking/Non-Blocking

- Blocking
    - í˜¸ì¶œí•œ í•¨ìˆ˜ê°€ ë°˜í™˜ë  ë•Œê¹Œì§€ í˜¸ì¶œì(ìŠ¤ë ˆë“œ)ì˜ ì œì–´ê¶Œì´ ë„˜ì–´ê°€ì„œ ë‹¤ë¥¸ ì¼ì„ í•  ìˆ˜ ì—†ìŒ.
- Non-Blocking
    - í˜¸ì¶œí•œ í•¨ìˆ˜ê°€ ì¦‰ì‹œ ë°˜í™˜ë˜ì–´ í˜¸ì¶œì(ìŠ¤ë ˆë“œ)ê°€ ë‹¤ë¥¸ ì¼ì„ í•  ìˆ˜ ìˆìŒ.

# ì°¸ê³ ìë£Œ

---

[https://blog.naver.com/n_cloudplatform/222189669084](https://blog.naver.com/n_cloudplatform/222189669084)

[https://blog.naver.com/n_cloudplatform/222255261317](https://blog.naver.com/n_cloudplatform/222255261317)

[https://loosie.tistory.com/872](https://loosie.tistory.com/872)