# 확률적 자료구조

---

> 💡시스템 설계 부분을 학습하면서 알게 된 자료구조 중 하나이며, 활용 가능성이 있다고 
> 생각하여 정리해보고자 함

- `Probabilistic Data Structures` 라고도 불리며,  [wiki](https://en.wikipedia.org/wiki/Category:Probabilistic_data_structures) 에서 다른 자료구조 확인 가능
- `input` 값을 주면 `output` 이 정확한 답이 아니라 확률적으로 정답에 가까운 답을 줌
- 대용량 데이터를 효율적으로 처리하기 위해 정확성을 일부 희생 ( `Trade-off` )

## 1. Bloom Filter

---

## 정의

- 원소가 집합에 속하는지 여부를 검사하는데 사용되는 `확률적 자료 구조`
- 어떤 값을 여러 해시 함수에 넣어 결과값들을 임의의 테이블에 인덱싱하여 해당되는 모든 값이
1인지를 따지는 자료구조

![1_i5HDQo5wWGBgPj_7QDFiVA.webp](/assets/data_structure/1.webp)

> 출처 : [https://levelup.gitconnected.com/bloom-filters-visuals-for-explanation-and-applied-systems-b58fb3cf524](https://levelup.gitconnected.com/bloom-filters-visuals-for-explanation-and-applied-systems-b58fb3cf524)
> 

## 특징

- `False Positive` 는 가능하지만 `False Negative` 는 불가능
    - 위와 같기 때문에 `False Positive` 발생 상황에 대비해야 함
- 삭제 기능이 지원되지 않기 때문에 해당 자료구조 적용 시에 검토가 필요
- `존재하지 않는 것은 100% 없지만, 존재하는 경우에는 확률적 값`
- `Redis Statck`  에서 Bloom 자료구조를 지원함
    - Redis 와는 다르고 단순히 확장 서비스로 봐도 무관
- `google guava` 라이브러리에서 Bloom 자료구조 지원

## 용어 정리

- `False Positive`
    - 실제로는 존재하지 않지만 존재 한다고 하는 경우
- `False Negative`
    - 실제로는 존재하지만 존재하지 않는다고 하는 경우

## 2. Cuckoo Filter

---

## 정의

- `Bloom Filter` 와 마찬가지로 특정 원소가 집합에 속하는지 검사하는데 사용되는 
`확률적 자료구조`
- 2개의 해시 함수를 활용하여 나온 각 각의 값을 2개의 해시 테이블을 활용하여
둘 중 하나의 위치에 저장

![1_1RIyKYICXoP9TYrRZSRJMw.gif](/assets/data_structure/2.gif)

> 출처 : [https://levelup.gitconnected.com/cuckoo-hashing-a-beginners-guide-e010288bf05d](https://levelup.gitconnected.com/cuckoo-hashing-a-beginners-guide-e010288bf05d)
> 

## 특징

- `Bloom Filter`  와 다르게 삭제가 가능
- `False Positive` 가능성이 있지만 가능성이 적다
- 충돌이 발생하는 경우에 Fingerprint를 여러번 재배치 해야하기 때문에 연산 시간이
길어질 수 있음.

## 용어정리

- `Figerprint`
    - `input` 값을 해시 함수를 통해 변환 시킨 뒤에 해시 값의 앞부분에서 일정 길이 영역
    - 즉, `input` 값을 대표하는 짧은 데이터이다

## 비교

![image.png](/assets/data_structure/3.png)

## 참고자료

---

- Bloom Filter
    - [https://gngsn.tistory.com/201](https://gngsn.tistory.com/201)
    - [https://devocean.sk.com/blog/techBoardDetail.do?ID=166739&boardType=techBlog](https://devocean.sk.com/blog/techBoardDetail.do?ID=166739&boardType=techBlog)
- Cuckoo Filter
    - [https://www.lkozma.net/cuckoo_hashing_visualization/](https://www.lkozma.net/cuckoo_hashing_visualization/)
    - [https://devocean.sk.com/blog/techBoardDetail.do?ID=166739&boardType=techBlog](https://devocean.sk.com/blog/techBoardDetail.do?ID=166739&boardType=techBlog)